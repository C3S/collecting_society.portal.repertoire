<!--! For copyright / license terms, see COPYRIGHT.rst (top level of repository)
      Repository: https://github.com/C3S/collecting_society.portal.repertoire -->
<tal:block metal:use-macro="backend39"
           i18n:domain="collecting_society_portal_repertoire">

    <!-- content left -->
    <tal:block metal:fill-slot="content-left"></tal:block>

    <!-- content right -->
    <tal:block metal:fill-slot="content-right">

        <div class="cs-symbolnavbar">
            <a href="javascript: history.back(1);">
                <span class="glyphicon glyphicon-arrow-left"></span>
            </a>
            <a href="${request.resource_path(context, '..')}">
                <span class="glyphicon glyphicon-list"></span>
            </a>
        </div>

        <img tal:condition="context.release and context.release.picture_data"
             tal:define="pic h.b64encode(context.release.picture_data) | None"
             class="img-responsive cs-release-img clearfix center-block"
             src="data:${context.release.picture_data_mime_type};base64,${pic}" />

        <div tal:content="structure EditRelease"/>

        <script>
            $(document).ready(function() {
                var releaseTypeSelect = $('#type');
                releaseTypeSelect.change(function() {
                    var selected = releaseTypeSelect
                        .children(":selected")
                        .first();
                    switch(selected.attr('value')) {
                        case 'artist':
                            $('#item-artist').show();
                            $('.item-split_artists').first().hide();
                            break;
                        case 'split':
                            $('#item-artist').hide();
                            $('.item-split_artists').first().show();
                            break;
                        case 'compilation':
                            $('#item-artist').hide();
                            $('.item-split_artists').first().hide();
                            break;
                    }
                });
                releaseTypeSelect.trigger('change');
            });
        </script>

    </tal:block>

</tal:block>