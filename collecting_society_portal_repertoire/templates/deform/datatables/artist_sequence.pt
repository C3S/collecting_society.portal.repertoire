<div tal:define="item_tmpl item_template|field.widget.item_template;
                 oid oid|field.oid;
                 name field.name;
                 title title|field.title;
                 min_len min_len|field.widget.min_len;
                 min_len min_len or 0;
                 max_len max_len|field.widget.max_len;
                 max_len max_len or 100000;
                 now_len len(subfields);
                 orderable orderable|field.widget.orderable;
                 orderable orderable and 1 or 0;
                 prototype field.widget.prototype(field)"
     i18n:domain="collecting_society_portal_repertoire">

    <!-- html node for tables -->
    <div class="datatable_sequence_${oid}"
         data-data="${data}" data-language="${language}"></div>

    <!-- datatable sequence-->
    <script>
        // init of datatable sequence
        var datatableSequence = new deform.DatatableSequence({
            oid: "${oid}",
            name: "${name}",
            title: false,
            minLen: "${min_len}",
            maxLen: "${max_len}",
            proto: "${prototype}",
            api: "${api}/artists",
            unique: "code",
            columns: [
                {
                    name: "name",
                    title: "${_('Name')}",
                    data: "name",
                    className: "all",
                    orderable: true,
                    datatableSequence: {
                        position: "displayed",
                        widgetType: 'TextInputWidget',
                        footerSearch: true,
                        createShow: true,
                    }
                },
                {
                    name: "code",
                    title: "${_('Code')}",
                    data: "code",
                    orderable: true,
                    datatableSequence: {
                        position: "displayed",
                        widgetType: 'HiddenWidget',
                        footerSearch: true,
                    }
                },
                {
                    name: "description",
                    title: "${_('Description')}",
                    data: "description",
                    className: "none",
                    orderable: false,
                    searchable: true,
                    datatableSequence: {
                        position: "collapsed",
                        widgetType: 'HiddenWidget',
                    }
                },
                {
                    name: "email",
                    title: "${_('Email')}",
                    data: "email",
                    visible: false,
                    orderable: false,
                    searchable: false,
                    datatableSequence: {
                        position: "invisible",
                        widgetType: 'TextInputWidget',
                        createShow: true,
                    }
                },
            ],
        }).init();
    </script>

</div>