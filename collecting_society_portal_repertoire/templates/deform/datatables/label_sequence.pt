<tal:block metal:extend-macro="sequence"
           i18n:domain="collecting_society_portal_repertoire"
           tal:define="oid oid|field.oid;
                       name field.name;
                       title title|field.title;
                       actions actions|field.widget.actions;
                       min_len min_len|field.schema.min_len
                                      |field.widget.min_len
                                      |0;
                       max_len max_len|field.schema.max_len
                                      |field.widget.max_len
                                      |100000;
                       now_len len(subfields);
                       orderable orderable|field.widget.orderable;
                       orderable orderable and 1 or 0;
                       prototype field.widget.prototype(field);
                       errormsg field.errormsg">

    <!-- datatable sequence-->
    <tal:block metal:fill-slot="init">
        <script>
            // init of datatable sequence
            var datatableSequence = new deform.DatatableSequence({
                oid: "${oid}",
                name: "${name}",
                title: "${title}",
                actions: '${actions}',
                minLen: "${min_len}",
                maxLen: "${max_len}",
                errormsg: "${errormsg}",
                proto: "${prototype}",
                api: "${api}/labels",
                unique: false,
                columns: [
                    {
                        name: "name",
                        title: "${_('Name')}",
                        data: "name",
                        className: "all",
                        orderable: true,
                        render: $.fn.dataTable.render.text(),
                        datatableSequence: {
                            position: "displayed",
                            widgetType: 'TextInputWidget',
                            footerSearch: true,
                            createShow: true,
                        }
                    },
                    {
                        name: "gvl_code",
                        title: "${_('Code')}",
                        data: "gvl_code",
                        orderable: true,
                        render: $.fn.dataTable.render.text(),
                        datatableSequence: {
                            position: "displayed",
                            widgetType: 'HiddenWidget',
                            footerSearch: true,
                        }
                    },
                ],
            }).init();
        </script>
    </tal:block>

</tal:block>
